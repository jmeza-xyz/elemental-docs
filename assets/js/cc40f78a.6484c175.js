"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[5101],{49258:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var a=t(74848),r=t(28453);const i='apiVersion: elemental.cattle.io/v1beta1\nkind: MachineRegistration\nmetadata:\n  name: fire-nodes\n  namespace: fleet-default\nspec:\n  machineName: "fire-node-${Random/Hex/12}"\n  config:\n    cloud-config:\n      users:\n        - name: root\n          passwd: root\n    elemental:\n      install:\n        reboot: true\n        device: /dev/sda\n        debug: true\n  machineInventoryLabels:\n    elemental.cattle.io/UUID: "${Random/UUID}"\n',l={sidebar_label:"Random",title:""},s=void 0,d={id:"label-templates-random",title:"",description:"Random Template Variables",source:"@site/docs/label-templates-random.md",sourceDirName:".",slug:"/label-templates-random",permalink:"/next/label-templates-random",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{sidebar_label:"Random",title:""},sidebar:"docs",previous:{title:"Product",permalink:"/next/label-templates-product"},next:{title:"Runtime",permalink:"/next/label-templates-runtime"}},o={},c=[{value:"Random Template Variables",id:"random-template-variables",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components},{CodeBlock:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CodeBlock",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"random-template-variables",children:"Random Template Variables"}),"\n",(0,a.jsx)(n.p,{children:"Random template variables are built-in in the Elemental Operator."}),"\n",(0,a.jsxs)(n.p,{children:["They allow to include random ",(0,a.jsx)(n.code,{children:"Int"}),", ",(0,a.jsx)(n.code,{children:"Hex"})," or ",(0,a.jsx)(n.code,{children:"UUID"})," values in custom ",(0,a.jsx)(n.a,{href:"label-templates",children:"label templates"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The values are computed on the fly during the ",(0,a.jsx)(n.code,{children:"label template variables"})," rendering."]}),"\n",(0,a.jsxs)(n.admonition,{title:"Random label templates are rendered only once",type:"info",children:[(0,a.jsxs)(n.p,{children:["A label template containing a Random variable is rendered only if the\n",(0,a.jsx)(n.a,{href:"machineinventory-reference",children:"MachineInventory"})," of the registering\nhost doesn't have a value for that label yet (a label with the same key is missing or its value is empty)."]}),(0,a.jsx)(n.p,{children:"So, the three cases in which a label template with a Random variable is rendered are:"}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["the host is registering for the first time and the ",(0,a.jsx)(n.a,{href:"machineinventory-reference",children:"MachineInventory"})," is created anew"]}),"\n",(0,a.jsx)(n.li,{children:"the label template has been added to the MachineRegistration after the host (re-)registered last time"}),"\n",(0,a.jsxs)(n.li,{children:["the ",(0,a.jsx)(n.a,{href:"machineinventory-reference",children:"MachineInventory"})," label matching the label template (same label key) has been manually removed\nor its value has been cleared out"]}),"\n"]})]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Variable"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/UUID}"})}),(0,a.jsx)(n.td,{children:"random UUID (e.g., fd95324a-c26b-4e28-8727-1dcec293a0ec)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/Hex/[1-32]}"})}),(0,a.jsx)(n.td,{children:"random hexadecimal string of the specified lenght (min 1, max 32)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/Int/[MAXINT]"})}),(0,a.jsx)(n.td,{children:"random integer (min 0, max MAXINT-1)"})]})]})]}),"\n",(0,a.jsx)(n.admonition,{title:"Rendering Examples",type:"note",children:(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"template value"}),(0,a.jsx)(n.th,{children:"rendered value example"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/UUID}"})}),(0,a.jsx)(n.td,{children:"fd95324a-c26b-4e28-8727-1dcec293a0ec"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/Hex/12}"})}),(0,a.jsx)(n.td,{children:"acd231f222b8"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"${Random/Int/10000}"})}),(0,a.jsx)(n.td,{children:"9432"})]})]})]})}),"\n",(0,a.jsx)(n.p,{children:"The Random Template Variables can be handy for generating custom hostnames to be assigned to the registering host."}),"\n",(0,a.jsxs)(n.p,{children:["Since the hostname must be unique and is assigned through the\n",(0,a.jsx)(n.a,{href:"machineregistration-reference",children:"MachineRegistration"})," ",(0,a.jsx)(n.code,{children:"spec.machineName"})," field, Random variables can be used\nto ensure uniqueness of a group of host sharing the same custom prefix and/or suffix."]}),"\n",(0,a.jsxs)(n.p,{children:["Check the ",(0,a.jsx)(n.a,{href:"hostname",children:"HowTo/Customize hostname"})," section for more information."]}),"\n",(0,a.jsx)(t,{language:"yaml",title:"registration example Random template variables",showLineNumbers:!0,children:i})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var a=t(96540);const r={},i=a.createContext(r);function l(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);